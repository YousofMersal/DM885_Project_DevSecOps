apiVersion: skaffold/v3alpha1
kind: Config
metadata:
  name: auth-service
build:
  artifacts:
  - image: dev.local/auth-service
    docker:
      dockerfile: Dockerfile
    # sync:
    #   manual:
    #     - src: "src/**/*.ts"
    #       dest: "."
deploy:
  helm:
    releases:
      - name: auth-service-release
        chartPath: helm
        namespace: "project"
        createNamespace: true
# profiles:
#   - name: development
#     activation:
#       - command: dev
#     patches:
#       # Use Dockerfile.dev for development profile
#       - op: replace
#         path: /build/artifacts/0/docker/dockerfile
#         value: Dockerfile.dev
profiles:
  - name: production
    build:
      tagPolicy:
        gitCommit: {}
      artifacts:
      - image: ghcr.io/yousofmersal/dm885_auth-service
